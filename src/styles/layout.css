html, body { height: 100%; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-family-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Remove spinners for number inputs */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type="number"] { -moz-appearance: textfield; }

@layer components {
  .app-header { position: sticky; top: 0; left: 0; right: 0; z-index: 50; background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border-bottom: 0.5px solid rgba(0, 0, 0, 0.08); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02); width: 100%; margin: 0; padding: 0; transition: all var(--motion-base) var(--ease-inout); }
  .app-header .header-content { height: var(--header-h); display: flex; align-items: center; justify-content: space-between; padding-left: max(12px, env(safe-area-inset-left)); padding-right: max(12px, env(safe-area-inset-right)); width: 100%; }
  @media (min-width: 768px) { .app-header .header-content { padding-left: max(24px, env(safe-area-inset-left)); padding-right: max(24px, env(safe-area-inset-right)); } }
  @media (min-width: 1024px) { .app-header .header-content { padding-left: max(32px, env(safe-area-inset-left)); padding-right: max(32px, env(safe-area-inset-right)); } }
  @media (min-width: 1280px) { .app-header .header-content { padding-left: max(40px, env(safe-area-inset-left)); padding-right: max(40px, env(safe-area-inset-right)); } }

  .product-header { position: sticky; top: var(--header-h); left: 0; right: 0; z-index: 40; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 0.5px solid rgba(0, 0, 0, 0.06); box-shadow: 0 6px 16px rgba(9, 17, 33, 0.06); width: 100%; height: var(--product-header-h); margin: 0; padding: 0; transition: all var(--motion-base) var(--ease-inout); }
  .product-header-content { height: var(--product-header-h); display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; padding-left: max(12px, env(safe-area-inset-left)); padding-right: max(12px, env(safe-area-inset-right)); width: 100%; }

  .stepper-container { display: flex; align-items: center; justify-content: center; gap: 16px; height: var(--stepper-h); padding: 4px 0; margin: 4px 0 8px 0; }
  .stepper-item { display: flex; align-items: center; gap: 8px; position: relative; }
  .stepper-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--surface-2); border: 1px solid var(--border); transition: all var(--motion-base) var(--ease-inout); }
  .stepper-dot.active { background: var(--brand); border-color: var(--brand); transform: scale(1.2); }
  .stepper-dot.completed { background: var(--brand); border-color: var(--brand); opacity: 0.6; }
  .stepper-label { font-size: 14px; font-weight: 600; color: var(--text-soft); transition: color var(--motion-base) var(--ease-inout); }
  .stepper-label.active { color: var(--brand); font-weight: 700; }
  .stepper-label.completed { color: var(--text-muted); }
  .stepper-connector { display: none; }
  .progress-track, .progress-active { display: none; }

  .app-container { width: 100%; max-width: 680px; margin: 0 auto; padding-left: max(20px, env(safe-area-inset-left)); padding-right: max(20px, env(safe-area-inset-right)); padding-top: 8px; padding-bottom: 8px; min-height: calc(100dvh - var(--header-h) - var(--product-header-h) - var(--stepper-h) - var(--actions-h) - var(--safari-ui-h)); }
  @media (min-height: 700px) { .app-container { display: grid; align-content: center; row-gap: 16px; } }
  @media (min-width: 768px) { .app-container { max-width: 700px; padding-left: max(24px, env(safe-area-inset-left)); padding-right: max(24px, env(safe-area-inset-right)); } }
  @media (min-width: 1024px) { .app-container { max-width: 720px; padding-left: max(32px, env(safe-area-inset-left)); padding-right: max(32px, env(safe-area-inset-right)); } }
  @media (min-width: 1280px) { .app-container { max-width: 720px; padding-left: max(40px, env(safe-area-inset-left)); padding-right: max(40px, env(safe-area-inset-right)); } }

  .app-card { background: var(--card); border-radius: var(--radius-all); box-shadow: var(--shadow-card); padding: 24px; min-height: 0; transition: all var(--motion-base) var(--ease-inout); }
  .app-container .app-card:first-child { margin-top: 4px; padding-top: 18px; }
  .app-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-elevated); }
  @media (min-width: 768px) { .app-card { padding: 28px; min-height: 0; } }
  @media (min-width: 1024px) { .app-card { padding: 32px; min-height: 0; } }

  .safari-spacer { height: calc(var(--safari-ui-h) + env(safe-area-inset-bottom)); min-height: calc(var(--safari-ui-h) + env(safe-area-inset-bottom)); flex-shrink: 0; }
  .docked-actions { position: sticky; bottom: calc(var(--safari-ui-h) + env(safe-area-inset-bottom)); z-index: 60; border-top: 1px solid var(--border); background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); margin-bottom: calc(-1 * (var(--safari-ui-h) + env(safe-area-inset-bottom))); }
  @supports (backdrop-filter: blur(20px)) { .docked-actions { background: rgba(255, 255, 255, 0.6); } }
  .docked-actions .container { margin: 0 auto; max-width: 680px; padding-left: max(20px, env(safe-area-inset-left)); padding-right: max(20px, env(safe-area-inset-right)); padding-top: 12px; padding-bottom: 12px; }
  .docked-actions .grid { grid-template-columns: 44% 54%; gap: 16px; }
  .docked-actions button { height: 52px; font-size: 17px; font-weight: 700; }
  @keyframes dock-enter { from { transform: translateY(8px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
}

